<!DOCTYPE html>
<html>
<head>
    <title>Firebase Test - Add User</title>
    <script type="module">
        // Import Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Your Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyA56Pq_WcE6TehQDayLTZ0ibCHCwZkUUlw",
            authDomain: "onchainweb-37d30.firebaseapp.com",
            projectId: "onchainweb-37d30",
            storageBucket: "onchainweb-37d30.firebasestorage.app",
            messagingSenderId: "766146811888",
            appId: "1:766146811888:web:a96012963dffe31508ef35"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        console.log('Firebase initialized!');

        // Test function to add a user
        window.testAddUser = async function() {
            const output = document.getElementById('output');
            output.innerHTML = '‚è≥ Testing Firebase write...\n';

            try {
                const testWallet = '0xTEST' + Math.random().toString(36).substring(2, 15);

                const userData = {
                    wallet: testWallet,
                    walletType: 'test',
                    username: 'TestUser',
                    balance: 1000,
                    points: 50,
                    vipLevel: 1,
                    userId: 'USR' + Date.now(),
                    createdAt: new Date(),
                    lastLogin: new Date(),
                    status: 'active'
                };

                output.innerHTML += `\nüìù Creating user with wallet: ${testWallet}\n`;

                await setDoc(doc(db, 'users', testWallet), userData);

                output.innerHTML += '\n‚úÖ SUCCESS! User added to Firestore!\n';
                output.innerHTML += '\nüîç Check Firebase Console now:\n';
                output.innerHTML += 'https://console.firebase.google.com/u/0/project/onchainweb-37d30/firestore/data\n';
                output.innerHTML += '\nYou should see:\n';
                output.innerHTML += '  Collection: users\n';
                output.innerHTML += `    ‚îî‚îÄ‚îÄ Document: ${testWallet}\n`;

            } catch (error) {
                output.innerHTML += '\n‚ùå ERROR: ' + error.message + '\n';
                output.innerHTML += '\nFull error: ' + JSON.stringify(error, null, 2);
            }
        };
    </script>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #00ff00;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
        }
        button:hover {
            background: #00cc00;
        }
        #output {
            background: #000;
            padding: 20px;
            border: 2px solid #00ff00;
            margin-top: 20px;
            white-space: pre-wrap;
            min-height: 200px;
        }
        h1 {
            color: #00ff00;
        }
    </style>
</head>
<body>
    <h1>üß™ Firebase Write Test</h1>
    <p>This will test if data can be written to your Firestore database.</p>

    <button onclick="testAddUser()">üöÄ TEST: Add User to Firebase</button>

    <div id="output">Ready to test...</div>
</body>
</html>
